@using FantasyAuction.Client.Entities
@inject AlertService AlertService

<style>
    .alert-service {
        position: absolute;
        top: 4rem;
        right: 2rem;
    }

    .alert-service span {
        display: block;
        width: 20rem;
        line-height: 2.2rem;
        text-align: right;
        padding: 0.8rem;
        margin: 0.4em;
    }


    .alert {
        color: #fff;
        border-style: solid;
        border-width: 0 1px 4px 1px
    }

    .alert-primary {
        background-color: #158CBA;
        border-color: #127ba3
    }

    .alert-danger {
        background-color: #158CBA;
        border-color: #127ba3
    }
</style>

<div class="alert-service">
    @for (int c = 0; c < AlertService.Messages.Count; c++)
    {
        <span class="alert @getAlertClass(AlertService.Messages[c])">@AlertService.Messages[c].Message</span>
    }
</div>

@code {

    protected override void OnInitialized()
    {
        Console.WriteLine("AlertComponent:Initializied");
        AlertService.RefreshRequested += Refresh;
    }

    private String getAlertClass(IAlert alert)
    {
        return $"alert-{alert.AlertType.ToString().ToLower()}";
    }

    private void Refresh()
    {
        Console.WriteLine("AlertComponent:refreshing");
        StateHasChanged();
    }

}